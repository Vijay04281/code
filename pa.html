<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>THERMOANALYZE | FRINT</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&family=Outfit:wght@400;600;800&family=JetBrains+Mono:wght@400;700&display=swap');
        
        :root {
            --bg-base: #020408;
            --panel-bg: rgba(10, 14, 20, 0.9);
            --neon-cyan: #00f2ff;
            --neon-blue: #3b82f6;
            --glass-border: rgba(0, 242, 255, 0.1);
        }

        body { 
            font-family: 'Space Grotesk', sans-serif; 
            background-color: var(--bg-base); 
            color: #e2e8f0;
            margin: 0;
            background-image: 
                radial-gradient(circle at 0% 0%, rgba(0, 242, 255, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 100% 100%, rgba(59, 130, 246, 0.05) 0%, transparent 50%);
            min-height: 100vh;
            overflow-x: hidden;
            perspective: 1000px;
        }

        /* --- LOADING SCREEN STYLES --- */
        #loading-screen {
            position: fixed;
            inset: 0;
            background: #020408;
            z-index: 9999;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            transition: opacity 0.8s ease, visibility 0.8s;
        }

        .loader-logo {
            animation: pulse 2s infinite ease-in-out;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 1; filter: drop-shadow(0 0 10px rgba(0, 242, 255, 0.5)); }
            50% { transform: scale(1.05); opacity: 0.8; filter: drop-shadow(0 0 20px rgba(0, 242, 255, 0.8)); }
        }

        .progress-container {
            width: 240px;
            height: 2px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 4px;
            margin-top: 2rem;
            overflow: hidden;
            position: relative;
        }

        .progress-bar {
            position: absolute;
            height: 100%;
            width: 0%;
            background: var(--neon-cyan);
            box-shadow: 0 0 10px var(--neon-cyan);
            transition: width 0.4s ease;
        }

        /* --- APP STYLES --- */
        .command-console {
            background: linear-gradient(180deg, rgba(15, 23, 42, 0.95) 0%, rgba(2, 6, 23, 1) 100%);
            border: 1px solid rgba(0, 242, 255, 0.2);
            box-shadow: 0 0 30px rgba(0, 0, 0, 0.8), inset 0 1px 1px rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
            opacity: 0;
            transform: rotateY(-20deg) translateZ(-100px);
            height: 100%;
            display: flex;
            flex-direction: column;
        }

        .command-console.revealed {
            opacity: 1;
            transform: rotateY(0deg) translateZ(0);
        }

        .console-header {
            background: rgba(0, 242, 255, 0.05);
            border-bottom: 1px solid rgba(0, 242, 255, 0.1);
            padding: 12px 20px;
            border-radius: 20px 20px 0 0;
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-shrink: 0;
        }

        .nav-btn {
            position: relative;
            background: rgba(255, 255, 255, 0.02);
            border: 1px solid rgba(255, 255, 255, 0.05);
            padding: 14px 20px;
            border-radius: 12px;
            text-align: left;
            transition: all 0.4s cubic-bezier(0.23, 1, 0.32, 1);
            margin-bottom: 8px;
            overflow: hidden;
            transform: translateZ(0);
        }

        .nav-btn:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: rgba(0, 242, 255, 0.3);
            transform: translateZ(20px) translateX(4px);
            box-shadow: -10px 10px 20px rgba(0, 0, 0, 0.3);
        }

        .nav-btn::after {
            content: '';
            position: absolute;
            top: 0; left: -100%;
            width: 100%; height: 100%;
            background: linear-gradient(90deg, transparent, rgba(0, 242, 255, 0.1), transparent);
            transition: 0.5s;
        }

        .nav-btn:hover::after {
            left: 100%;
        }

        .nav-btn.active {
            background: rgba(0, 242, 255, 0.1);
            border-color: var(--neon-cyan);
            box-shadow: 0 0 15px rgba(0, 242, 255, 0.1);
            transform: translateZ(30px);
        }

        .nav-btn.active .btn-indicator {
            width: 12px;
            background: var(--neon-cyan);
            box-shadow: 0 0 10px var(--neon-cyan);
        }

        .btn-indicator {
            position: absolute;
            left: 0;
            top: 25%;
            bottom: 25%;
            width: 3px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 0 4px 4px 0;
            transition: all 0.3s ease;
        }

        .cyber-panel {
            background: var(--panel-bg);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
        }

        .input-field {
            background: #000;
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: #fff;
            padding: 12px;
            border-radius: 10px;
            font-family: 'JetBrains Mono';
            width: 100%;
        }

        .btn-execute {
            background: linear-gradient(135deg, #00f2ff 0%, #0099ff 100%);
            color: #000;
            font-weight: 800;
            letter-spacing: 2px;
            transition: all 0.3s ease;
        }

        @keyframes scanline {
            0% { transform: translateY(-100%); }
            100% { transform: translateY(100%); }
        }

        .scanline-effect {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to bottom, transparent, rgba(0, 242, 255, 0.03) 50%, transparent);
            pointer-events: none;
            animation: scanline 8s linear infinite;
        }
    </style>
</head>
<body>

    <!-- Loading Screen Overlay -->
    <div id="loading-screen">
        <div class="loader-logo mb-4">
            <div class="p-4 bg-cyan-500 rounded shadow-lg shadow-cyan-500/40">
                <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="black" stroke-width="3"><path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/></svg>
            </div>
        </div>
        <h2 class="font-header text-xl font-black tracking-tighter uppercase text-white">Thermo<span class="text-cyan-400">Core</span></h2>
        <div class="progress-container">
            <div id="loader-progress" class="progress-bar"></div>
        </div>
        <p id="loader-text" class="text-[10px] font-mono text-slate-500 mt-4 uppercase tracking-[0.2em]">Initializing Core Systems...</p>
    </div>

    <div id="workspace">
        <header class="h-20 flex items-center px-8 border-b border-white/5 bg-black/50 backdrop-blur-md">
            <div class="flex items-center gap-4">
                <div class="p-2 bg-cyan-500 rounded shadow-lg shadow-cyan-500/20">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="black" stroke-width="3"><path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/></svg>
                </div>
                <h1 class="font-header text-xl font-black tracking-tighter uppercase text-white">Thermo<span class="text-cyan-400">Core</span> <span class="text-xs font-mono text-slate-500 tracking-normal font-normal ml-2">PRO v4.5</span></h1>
            </div>
        </header>

        <main class="p-6 max-w-[1600px] mx-auto grid grid-cols-1 lg:grid-cols-12 gap-8 mt-4 items-stretch">
            
            <div class="lg:col-span-3">
                <div id="menu-console" class="command-console p-0 overflow-hidden">
                    <div class="scanline-effect"></div>
                    <div class="console-header">
                        <span class="text-[10px] font-mono text-cyan-400 font-bold uppercase tracking-widest">Command Center</span>
                        <div class="flex gap-1">
                            <div class="w-2 h-2 rounded-full bg-red-500/50"></div>
                            <div class="w-2 h-2 rounded-full bg-yellow-500/50"></div>
                            <div class="w-2 h-2 rounded-full bg-green-500/50"></div>
                        </div>
                    </div>
                    
                    <div class="p-6 flex-grow flex flex-col">
                        <nav class="flex flex-col flex-grow" id="main-nav">
                            <button onclick="switchTab('otto')" id="tab-otto" class="nav-btn active">
                                <div class="btn-indicator"></div>
                                <span class="text-[10px] font-mono text-slate-500 block">ID: 001</span>
                                <span class="font-bold text-sm tracking-wide">OTTO CYCLE</span>
                            </button>
                            <button onclick="switchTab('rankine')" id="tab-rankine" class="nav-btn">
                                <div class="btn-indicator"></div>
                                <span class="text-[10px] font-mono text-slate-500 block">ID: 002</span>
                                <span class="font-bold text-sm tracking-wide text-slate-400">RANKINE CYCLE</span>
                            </button>
                            <button onclick="switchTab('refrig')" id="tab-refrig" class="nav-btn">
                                <div class="btn-indicator"></div>
                                <span class="text-[10px] font-mono text-slate-500 block">ID: 003</span>
                                <span class="font-bold text-sm tracking-wide text-slate-400">REFRIGERATION</span>
                            </button>
                            <button onclick="switchTab('conduction')" id="tab-conduction" class="nav-btn">
                                <div class="btn-indicator"></div>
                                <span class="text-[10px] font-mono text-slate-500 block">ID: 004</span>
                                <span class="font-bold text-sm tracking-wide text-slate-400">CONDUCTION</span>
                            </button>
                            <button onclick="switchTab('heat-ex')" id="tab-heat-ex" class="nav-btn">
                                <div class="btn-indicator"></div>
                                <span class="text-[10px] font-mono text-slate-500 block">ID: 005</span>
                                <span class="font-bold text-sm tracking-wide text-slate-400">HEAT EXCHANGER</span>
                            </button>
                            
                            <div class="flex-grow"></div>
                        </nav>
                    </div>
                </div>
            </div>

            <div class="lg:col-span-4">
                <div class="cyber-panel p-8 h-full">
                    <div class="flex items-center gap-3 mb-8 border-b border-white/5 pb-4">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" class="text-cyan-400"><path d="M12 20v-8m0 0V4m0 8h8m-8 0H4" stroke-width="2"/></svg>
                        <h2 class="font-header text-sm font-bold uppercase tracking-widest">Parameters Configuration</h2>
                    </div>
                    
                    <div id="input-container" class="grid grid-cols-1 gap-6"></div>

                    <button onclick="calculate()" class="btn-execute w-full mt-10 py-5 rounded-xl text-sm uppercase">
                        Initialize Simulation
                    </button>
                </div>
            </div>

            <div class="lg:col-span-5 flex flex-col gap-6">
                <div id="data-grid" class="grid grid-cols-3 gap-4 transition-all duration-500">
                    <div class="cyber-panel p-4 bg-white/5 border-white/5">
                        <span class="text-[9px] font-mono text-slate-500 block mb-1 uppercase">Metric A</span>
                        <div class="text-xl font-bold font-header text-white" id="res-1">--</div>
                    </div>
                    <div class="cyber-panel p-4 bg-white/5 border-white/5">
                        <span class="text-[9px] font-mono text-slate-500 block mb-1 uppercase">Metric B</span>
                        <div class="text-xl font-bold font-header text-white" id="res-2">--</div>
                    </div>
                    <div class="cyber-panel p-4 bg-white/5 border-white/5">
                        <span class="text-[9px] font-mono text-slate-500 block mb-1 uppercase">Metric C</span>
                        <div class="text-xl font-bold font-header text-white" id="res-3">--</div>
                    </div>
                </div>

                <div class="cyber-panel p-8 flex-grow relative">
                    <div class="flex items-center justify-between mb-8">
                        <div class="flex items-center gap-2">
                            <div class="w-2 h-2 rounded-full bg-cyan-400 animate-ping"></div>
                            <h3 class="text-xs font-bold uppercase tracking-widest">Performance Monitor</h3>
                        </div>
                        <button onclick="showReportView()" id="export-btn" class="hidden text-[10px] font-bold text-cyan-400 border border-cyan-400/20 px-4 py-2 rounded-lg hover:bg-cyan-400/10 uppercase">Save Data</button>
                    </div>
                    
                    <div id="placeholder" class="absolute inset-0 flex flex-col items-center justify-center gap-4 text-slate-600">
                        <div class="w-12 h-12 border border-slate-800 rounded-full flex items-center justify-center">
                            <div class="w-8 h-8 border-t-2 border-cyan-500 rounded-full animate-spin"></div>
                        </div>
                        <span class="text-[10px] font-mono uppercase tracking-widest">Waiting for Signal...</span>
                    </div>

                    <div id="chart-section" class="hidden h-[300px]">
                        <canvas id="mainChart"></canvas>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <div id="report-view" class="hidden fixed inset-0 z-[100] bg-[#020408] overflow-y-auto p-4 md:p-12">
        <div class="max-w-4xl mx-auto">
            <div class="flex justify-between items-center mb-10">
                <button onclick="closeReportView()" class="text-xs font-bold text-slate-400 hover:text-white uppercase tracking-widest flex items-center gap-2">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
                    Return to Console
                </button>
                <button onclick="exportPDF()" class="bg-cyan-500 text-black px-8 py-3 rounded-xl text-[10px] font-extrabold uppercase tracking-widest shadow-lg shadow-cyan-500/20">Download PDF Document</button>
            </div>

            <div id="printable-report" class="bg-white text-black p-12 md:p-20 rounded-3xl shadow-2xl space-y-12">
                <div class="flex justify-between items-start border-b-4 border-black pb-8">
                    <div>
                        <h1 class="text-5xl font-header font-black uppercase tracking-tighter">System Report</h1>
                        <p class="text-xs font-mono text-slate-500 mt-2 font-bold" id="report-module-name">MODULE: OTTO CYCLE</p>
                    </div>
                    <div class="text-right text-[10px] font-mono leading-relaxed font-bold">
                        TIMESTAMP: <span id="report-date-string">2024-05-20</span><br>
                        LOG: TX-ALPHA-9
                    </div>
                </div>

                <div class="grid grid-cols-2 gap-12">
                    <div class="p-8 bg-slate-50 rounded-3xl">
                        <h4 class="text-xs font-black uppercase mb-6 text-slate-400">Inputs</h4>
                        <div id="report-inputs-list" class="space-y-4"></div>
                    </div>
                    <div class="p-8 bg-cyan-50 rounded-3xl border border-cyan-100">
                        <h4 class="text-xs font-black uppercase mb-6 text-cyan-600">Calculated Results</h4>
                        <div id="report-results-list" class="space-y-4"></div>
                    </div>
                </div>

                <div class="h-[300px] border border-black/5 rounded-3xl p-6">
                    <canvas id="reportChart"></canvas>
                </div>
            </div>
        </div>
    </div>

    <script>
        // --- LOADER LOGIC ---
        function startLoader() {
            const progressBar = document.getElementById('loader-progress');
            const loaderText = document.getElementById('loader-text');
            const loaderScreen = document.getElementById('loading-screen');
            const menuConsole = document.getElementById('menu-console');
            
            const steps = [
                { p: 10, t: "Booting Kernel..." },
                { p: 30, t: "Loading Physics Modules..." },
                { p: 60, t: "Calibrating Sensors..." },
                { p: 90, t: "Establishing Uplink..." },
                { p: 100, t: "Ready." }
            ];

            let stepIdx = 0;
            const interval = setInterval(() => {
                if (stepIdx < steps.length) {
                    progressBar.style.width = steps[stepIdx].p + '%';
                    loaderText.innerText = steps[stepIdx].t;
                    stepIdx++;
                } else {
                    clearInterval(interval);
                    setTimeout(() => {
                        loaderScreen.style.opacity = '0';
                        loaderScreen.style.visibility = 'hidden';
                        setTimeout(() => {
                            menuConsole.classList.add('revealed');
                        }, 300);
                    }, 500);
                }
            }, 400);
        }

        let currentTab = 'otto';
        let mainChart = null;
        let reportChart = null;
        let simulationData = null;
        let currentInputs = [];

        const CONFIG = {
            otto: { 
                name: "Otto Cycle", 
                metrics: ["Efficiency", "Peak P", "Net Work"],
                fields: [
                    {id:'r', label:'Compression Ratio', unit:'r', val:8}, 
                    {id:'t1', label:'Inlet Temp', unit:'°C', val:25, type:'temp'}, 
                    {id:'p1', label:'Inlet Pressure', unit:'bar', val:1}, 
                    {id:'t3', label:'Peak Temp', unit:'°C', val:1200, type:'temp'}
                ] 
            },
            rankine: { 
                name: "Rankine Cycle", 
                metrics: ["Efficiency", "Steam Quality", "Pump Work"],
                fields: [
                    {id:'ph', label:'Boiler Pressure', unit:'bar', val:80}, 
                    {id:'pl', label:'Cond Pressure', unit:'bar', val:0.08}, 
                    {id:'th', label:'Boiler Temp', unit:'°C', val:500, type:'temp'}
                ] 
            },
            refrig: { 
                name: "Refrigeration", 
                metrics: ["COP", "Cooling Load", "Comp Work"],
                fields: [
                    {id:'te', label:'Evaporator T', unit:'°C', val:-10, type:'temp'}, 
                    {id:'tc', label:'Condenser T', unit:'°C', val:40, type:'temp'}
                ] 
            },
            conduction: { 
                name: "Conduction", 
                metrics: ["Heat Flux", "Total Loss", "Gradient"],
                fields: [
                    {id:'k', label:'K-Coefficient', unit:'W/mK', val:45}, 
                    {id:'thick', label:'Thickness', unit:'m', val:0.1}, 
                    {id:'area', label:'Total Area', unit:'m²', val:2.5}
                ] 
            },
            'heat-ex': { 
                name: "Heat Exchanger", 
                metrics: ["LMTD", "Heat Rate", "Effectiveness"],
                fields: [
                    {id:'u', label:'U-Coefficient', unit:'W/m²K', val:800}, 
                    {id:'area', label:'Surface Area', unit:'m²', val:15}, 
                    {id:'th1', label:'Hot Inlet (K/C)', unit:'°C/K', val:363, type:'temp', conversion: true}
                ] 
            }
        };

        function switchTab(tab) {
            currentTab = tab;
            document.querySelectorAll('.nav-btn').forEach(b => {
                b.classList.remove('active');
                b.querySelector('span:last-child').classList.add('text-slate-400');
            });
            const active = document.getElementById(`tab-${tab}`);
            active.classList.add('active');
            active.querySelector('span:last-child').classList.remove('text-slate-400');
            
            // Update Metric Labels
            const metrics = CONFIG[tab].metrics;
            document.querySelector('#data-grid div:nth-child(1) span').innerText = metrics[0];
            document.querySelector('#data-grid div:nth-child(2) span').innerText = metrics[1];
            document.querySelector('#data-grid div:nth-child(3) span').innerText = metrics[2];
            
            renderInputs();
        }

        function renderInputs() {
            const container = document.getElementById('input-container');
            container.innerHTML = CONFIG[currentTab].fields.map(f => `
                <div class="space-y-2">
                    <div class="flex justify-between items-center">
                        <label class="text-[9px] font-bold text-slate-500 uppercase tracking-widest">${f.label}</label>
                        <span class="text-[10px] font-mono text-cyan-400 bg-cyan-400/5 px-2 py-0.5 rounded">${f.unit}</span>
                    </div>
                    <input type="number" id="field-${f.id}" value="${f.val}" class="input-field text-sm">
                    ${f.conversion ? `<p class="text-[8px] text-slate-600 font-mono italic mt-1">* Values > 200 detected as Kelvin & converted to Celsius</p>` : ''}
                </div>
            `).join('');
        }

        function calculate() {
            currentInputs = CONFIG[currentTab].fields.map(f => {
                let rawVal = parseFloat(document.getElementById(`field-${f.id}`).value);
                let displayVal = rawVal;
                let displayUnit = f.unit;

                // Handle Kelvin to Celsius Conversion
                if (f.type === 'temp' && rawVal > 200) {
                    displayVal = (rawVal - 273.15).toFixed(2);
                    displayUnit = '°C (from K)';
                }

                return {
                    label: f.label,
                    val: displayVal,
                    unit: displayUnit
                };
            });

            // Specific Simulation Logic for Heat Exchanger or others
            if (currentTab === 'heat-ex') {
                simulationData = [
                    { label: 'LMTD', val: (45.5 + Math.random()*5).toFixed(2), unit: 'K' },
                    { label: 'Heat Rate', val: (12.4 + Math.random()*8).toFixed(1), unit: 'kW' },
                    { label: 'Effectiveness', val: (0.72 + Math.random()*0.1).toFixed(2), unit: 'ε' }
                ];
            } else {
                simulationData = [
                    { label: 'Result Alpha', val: (38 + Math.random()*20).toFixed(2), unit: '%' },
                    { label: 'Result Beta', val: (25 + Math.random()*35).toFixed(1), unit: 'pts' },
                    { label: 'Result Gamma', val: (180 + Math.random()*120).toFixed(0), unit: 'un' }
                ];
            }
            
            updateUI(simulationData);
        }

        function updateUI(results) {
            document.getElementById('placeholder').classList.add('hidden');
            document.getElementById('chart-section').classList.remove('hidden');
            document.getElementById('export-btn').classList.remove('hidden');
            
            document.getElementById('res-1').innerText = `${results[0].val}${results[0].unit}`;
            document.getElementById('res-2').innerText = `${results[1].val}${results[1].unit}`;
            document.getElementById('res-3').innerText = `${results[2].val}${results[2].unit}`;

            renderChart('mainChart', true);
        }

        function renderChart(id, isDark) {
            const ctx = document.getElementById(id).getContext('2d');
            if(id === 'mainChart' && mainChart) mainChart.destroy();
            if(id === 'reportChart' && reportChart) reportChart.destroy();

            const chart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['0', '1', '2', '3', '4', '5', '6'],
                    datasets: [{
                        data: Array.from({length: 7}, () => Math.floor(Math.random() * 100)),
                        borderColor: isDark ? '#00f2ff' : '#000000',
                        borderWidth: 3,
                        pointRadius: 4,
                        pointBackgroundColor: isDark ? '#00f2ff' : '#000000',
                        tension: 0.3,
                        fill: true,
                        backgroundColor: isDark ? 'rgba(0, 242, 255, 0.05)' : 'rgba(0,0,0,0.02)'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } },
                    scales: {
                        x: { grid: { display: false }, ticks: { color: isDark ? '#475569' : '#94a3b8' } },
                        y: { grid: { color: isDark ? 'rgba(255,255,255,0.05)' : 'rgba(0,0,0,0.05)' }, ticks: { color: isDark ? '#475569' : '#94a3b8' } }
                    }
                }
            });

            if(id === 'mainChart') mainChart = chart;
            else reportChart = chart;
        }

        function showReportView() {
            document.getElementById('workspace').classList.add('hidden');
            document.getElementById('report-view').classList.remove('hidden');
            populateReport();
        }

        function closeReportView() {
            document.getElementById('report-view').classList.add('hidden');
            document.getElementById('workspace').classList.remove('hidden');
        }

        function populateReport() {
            document.getElementById('report-module-name').innerText = `MODULE: ${CONFIG[currentTab].name}`;
            document.getElementById('report-date-string').innerText = new Date().toLocaleString();

            document.getElementById('report-inputs-list').innerHTML = currentInputs.map(i => `
                <div class="flex justify-between text-xs font-bold py-2 border-b border-black/5">
                    <span class="text-slate-400 uppercase tracking-widest">${i.label}</span>
                    <span class="font-black">${i.val} ${i.unit}</span>
                </div>
            `).join('');

            document.getElementById('report-results-list').innerHTML = simulationData.map(r => `
                <div class="flex justify-between text-xs font-bold py-2 border-b border-cyan-100">
                    <span class="text-cyan-600 uppercase tracking-widest">${r.label}</span>
                    <span class="font-black text-black">${r.val} ${r.unit}</span>
                </div>
            `).join('');

            setTimeout(() => renderChart('reportChart', false), 100);
        }

        async function exportPDF() {
            const element = document.getElementById('printable-report');
            const canvas = await html2canvas(element, { scale: 3 });
            const imgData = canvas.toDataURL('image/png');
            const { jsPDF } = window.jspdf;
            const pdf = new jsPDF('p', 'mm', 'a4');
            const pdfWidth = pdf.internal.pageSize.getWidth();
            const pdfHeight = (canvas.height * pdfWidth) / canvas.width;
            pdf.addImage(imgData, 'PNG', 0, 0, pdfWidth, pdfHeight);
            pdf.save(`THERMO_DATA_${Date.now()}.pdf`);
        }

        window.onload = () => {
            renderInputs();
            startLoader();
        };
    </script>
</body>
</html>